{% load ticket_extras %}
{% load bootstrap_tags %}
<script type="text/css">
    td {
        vertical-align: inherit;
    }
</script>

<section class="ticket">
    <tr>
        <td>
            <a href="{% url 'ticket' ticket.id %}">
             {% if subject.name == 'Bug' %}
                <p>#{{ ticket.bug.id }}</p>
             {% elif subject.name == 'Feature' %}
                 <p>#{{ ticket.feature.id }}</p>
             {% endif %}
            </a>
        </td>
        <td>
            <p>{{ ticket.name }}</p>
        </td>
        <td>
            <p>{{ ticket.description | striptags | truncatechars:50 }}</p>
        </td>
        <td>
            <p>{{ ticket.user }}</p>
        </td>
        <td>
            <p>{{ ticket.posts.last.user }}</p>
        </td>
        <td>
            <p>{{ ticket.posts.last.created_at }}</p>
        </td>
        <td class="text-center">
            <span id="statusButton" class="label label-default" style="background-color:{{ ticket.status|get_label_color }};color:white;font-size: medium">{{ ticket.status }}</span>
        </td>
        <td class="text-center">
            {% if user.is_authenticated %}
                {% if subject.name == 'Feature'%}
                    <a href="{% url 'custom_donate' ticket.id subject.id%}"><button class="btn btn-success">Donate</button></a>
                {% else %}
                    {% autoescape off %}
                    {% user_vote_button ticket subject user %}
                    {% endautoescape %}
                {% endif %}
            {% endif %}
        </td>
    </tr>
</section>